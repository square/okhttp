<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_202) on Wed Mar 13 23:56:43 EDT 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Authenticator (OkHttp 3.14.0 API)</title>
<meta name="date" content="2019-03-13">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
<link rel="canonical" href="https://square.github.io/okhttp/4.x/okhttp/okhttp3/-authenticator/"/>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Authenticator (OkHttp 3.14.0 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../okhttp3/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Authenticator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../okhttp3/Address.html" title="class in okhttp3"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../okhttp3/Cache.html" title="class in okhttp3"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?okhttp3/Authenticator.html" target="_top">Frames</a></li>
<li><a href="Authenticator.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">okhttp3</div>
<h2 title="Interface Authenticator" class="title">Interface Authenticator</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public interface <span class="typeNameLabel">Authenticator</span></pre>
<div class="block">Performs either <strong>preemptive</strong> authentication before connecting to a proxy server,
 or <strong>reactive</strong> authentication after receiving a challenge from either an origin web
 server or proxy server.

 <h3>Preemptive Authentication</h3>

 <p>To make HTTPS calls using an HTTP proxy server OkHttp must first negotiate a connection with
 the proxy. This proxy connection is called a "TLS Tunnel" and is specified by <a
 href="https://tools.ietf.org/html/rfc2817">RFC 2817</a>. The HTTP CONNECT request that creates
 this tunnel connection is special: it does not participate in any <a href="../okhttp3/Interceptor.html" title="interface in okhttp3">interceptors</a> or <a href="../okhttp3/EventListener.html" title="class in okhttp3">event listeners</a>. It doesn't include the motivating
 request's HTTP headers or even its full URL; only the target server's hostname is sent to the
 proxy.

 <p>Prior to sending any CONNECT request OkHttp always calls the proxy authenticator so that it
 may prepare preemptive authentication. OkHttp will call <a href="../okhttp3/Authenticator.html#authenticate-okhttp3.Route-okhttp3.Response-"><code>authenticate(okhttp3.Route, okhttp3.Response)</code></a> with a fake <code>HTTP/1.1 407 Proxy Authentication Required</code> response that has a <code>Proxy-Authenticate:
 OkHttp-Preemptive</code> challenge. The proxy authenticator may return either either an authenticated
 request, or null to connect without authentication.
 <pre>   <code>
    for (Challenge challenge : response.challenges()) {
      // If this is preemptive auth, use a preemptive credential.
      if (challenge.scheme().equalsIgnoreCase("OkHttp-Preemptive")) {
        return response.request().newBuilder()
            .header("Proxy-Authorization", "secret")
            .build();
      }
    }

    return null; // Didn't find a preemptive auth scheme.
 </code></pre>

 <h3>Reactive Authentication</h3>

 <p>Implementations authenticate by returning a follow-up request that includes an authorization
 header, or they may decline the challenge by returning null. In this case the unauthenticated
 response will be returned to the caller that triggered it.

 <p>Implementations should check if the initial request already included an attempt to
 authenticate. If so it is likely that further attempts will not be useful and the authenticator
 should give up.

 <p>When reactive authentication is requested by an origin web server, the response code is 401
 and the implementation should respond with a new request that sets the "Authorization" header.
 <pre>   <code>

    if (response.request().header("Authorization") != null) {
      return null; // Give up, we've already failed to authenticate.
    }

    String credential = Credentials.basic(...)
    return response.request().newBuilder()
        .header("Authorization", credential)
        .build();
 </code></pre>

 <p>When reactive authentication is requested by a proxy server, the response code is 407 and the
 implementation should respond with a new request that sets the "Proxy-Authorization" header.
 <pre>   <code>

    if (response.request().header("Proxy-Authorization") != null) {
      return null; // Give up, we've already failed to authenticate.
    }

    String credential = Credentials.basic(...)
    return response.request().newBuilder()
        .header("Proxy-Authorization", credential)
        .build();
 </code></pre>

 <p>The proxy authenticator may implement preemptive authentication, reactive authentication, or
 both.

 <p>Applications may configure OkHttp with an authenticator for origin servers, or proxy servers,
 or both.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../okhttp3/Authenticator.html" title="interface in okhttp3">Authenticator</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../okhttp3/Authenticator.html#NONE">NONE</a></span></code>
<div class="block">An authenticator that knows no credentials and makes no attempt to authenticate.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../okhttp3/Request.html" title="class in okhttp3">Request</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../okhttp3/Authenticator.html#authenticate-okhttp3.Route-okhttp3.Response-">authenticate</a></span>(<a href="../okhttp3/Route.html" title="class in okhttp3">Route</a>&nbsp;route,
            <a href="../okhttp3/Response.html" title="class in okhttp3">Response</a>&nbsp;response)</code>
<div class="block">Returns a request that includes a credential to satisfy an authentication challenge in <code>response</code>.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="NONE">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>NONE</h4>
<pre>static final&nbsp;<a href="../okhttp3/Authenticator.html" title="interface in okhttp3">Authenticator</a> NONE</pre>
<div class="block">An authenticator that knows no credentials and makes no attempt to authenticate.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="authenticate-okhttp3.Route-okhttp3.Response-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>authenticate</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation">@Nullable</a>
<a href="../okhttp3/Request.html" title="class in okhttp3">Request</a>&nbsp;authenticate(<a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation">@Nullable</a>
                               <a href="../okhttp3/Route.html" title="class in okhttp3">Route</a>&nbsp;route,
                               <a href="../okhttp3/Response.html" title="class in okhttp3">Response</a>&nbsp;response)
                        throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Returns a request that includes a credential to satisfy an authentication challenge in <code>response</code>. Returns null if the challenge cannot be satisfied.

 <p>The route is best effort, it currently may not always be provided even when logically
 available. It may also not be provided when an authenticator is re-used manually in an
 application interceptor, such as when implementing client-specific retries.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../okhttp3/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Authenticator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../okhttp3/Address.html" title="class in okhttp3"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../okhttp3/Cache.html" title="class in okhttp3"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?okhttp3/Authenticator.html" target="_top">Frames</a></li>
<li><a href="Authenticator.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2019. All rights reserved.</small></p>
</body>
</html>
